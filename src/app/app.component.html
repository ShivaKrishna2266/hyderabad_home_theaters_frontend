<!-- <app-header></app-header>
<router-outlet></router-outlet>
<app-whatsapp-widget></app-whatsapp-widget>
<app-footer></app-footer> -->

<ng-container *ngIf="!isLoggedIn(); else loggedInTemplate">
  <!-- If user is NOT logged in and NOT on login page -->
  <ng-container *ngIf="getCurrentRoute() !== '/'; else loginTemplate">
      <app-header></app-header>
      <router-outlet></router-outlet>
      <app-whatsapp-widget></app-whatsapp-widget>
      <app-footer></app-footer>
  </ng-container>
  
  <!-- If user is on the login page -->
  <ng-template #loginTemplate>
      <router-outlet></router-outlet>
  </ng-template>
</ng-container>

<!-- If user is logged in -->
<ng-template #loggedInTemplate>
  <ng-container *ngIf="getRole() === 'ADMIN'; else userTemplate">
      <div class="container-fluid h-100">
          <div class="row align-items-center mb-3">
              <div class="col-md-2">
                  <img src="../../../assets/images/logo2.jpg" alt="Ashok IT" class="img-fluid" />
              </div>
              <div class="col-md-10 p-3 d-flex justify-content-between bg-danger">
                  <i class="fas fa-bars fa-3x" [routerLink]="'/admin-dashboard'"></i>
                  <div class="logout" (mouseenter)="showCard()" (mouseleave)="hideCard()">
                      <i class="fas fa-user fa-3x"></i>
                      <div class="logout-card" *ngIf="cardVisible" (mouseenter)="resetCloseTimer()" (mouseleave)="hideCard()">
                          <div class="logout-card-item" (click)="logOut()"><b>Logout</b></div>
                      </div>
                  </div>    
              </div>
          </div>

          <!-- <div class="row">
        
              <nav id="sidebar" class="col-md-3 col-lg-2 sidebar">
                  <div class="accordion" id="accordionMenu">
                     
                      <div class="accordion-item">
                          <h2 class="accordion-header p-3" routerLink="admin/admin-dashbord">
                              <i class="fas fa-desktop"></i> Dashboard
                          </h2>
                      </div>
              
                    
                      <div class="accordion-item">
                          <h2 class="accordion-header position-relative p-3" id="headingViewCourse2" data-bs-toggle="collapse"
                              data-bs-target="#collapseViewCourse2" aria-expanded="true" aria-controls="collapseViewCourse2">
                              <i class="fas fa-newspaper"></i> Courses
                              <i class="fas fa-caret-down position-absolute top-0 end-0 mt-3 me-2"></i>
                          </h2>
                          <div id="collapseViewCourse2" class="accordion-collapse collapse" aria-labelledby="headingViewCourse2"
                              data-bs-parent="#accordionMenu">
                              <div class="accordion-body">
                                  <a routerLink="admin/view-course-category" class="d-block py-1 px-1">View Course Category</a>
                                  <a routerLink="admin/view-courses" class="sub_menu d-block py-1 px-1">View Course</a>
                                  <a routerLink="admin/view-modules" class="sub_menu d-block py-1 px-1">View Modules</a>
                                  <a routerLink="admin/view-sub-module" class="sub_menu d-block py-1 px-1">View Sub Modules</a>
                              </div>
                          </div>
                      </div>
                  </div>
              </nav>
              
              <div class="col-md-9 col-lg-10">
                  <router-outlet></router-outlet>
              </div>
          </div> -->
      </div>
  </ng-container>

  <!-- User Layout -->
  <ng-template #userTemplate>
    <app-header></app-header>
      <router-outlet></router-outlet>
  </ng-template>
</ng-template>
