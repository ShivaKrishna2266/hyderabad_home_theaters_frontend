<div class="container">

  <section class="view-brands">
    <div class="card-header mt-5 p-2">
      <h1 class="mt-3"><b>View All Orders</b></h1>
    </div>
  </section>

  <div class="row mt-5 mb-3">
    <!-- Pagination Dropdown -->
    <div class="col-md-3 col-sm-3 col-lg-3 col-xl-3 mb-3">
      <label for="Show" class="form-label"><b>Show</b></label>
      <select id="Show" class="form-select" [(ngModel)]="pageSize">
        <option value="2">2</option>
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="30">30</option>
        <option value="60">60</option>
        <option value="100">100</option>
        <option value="200">200</option>
      </select>
    </div>

    <!-- Order User Name Filter -->
    <div class="col-md-4 col-sm-4 col-lg-4 col-xl-4 mb-3">
      <label for="username" class="form-label"><b>Ordered User Name</b></label>
      <input id="username" class="form-control" [(ngModel)]="usernameFilter" (ngModelChange)="applyFilters()">
    </div>

    <!-- Brand Status Filter -->
    <div class="col-md-4 col-sm-4 col-lg-4 col-xl-4 mb-3">
      <label for="orderStatus" class="form-label"><b>Order Status</b></label>
      <select name="orderStatus" id="orderStatus" class="form-select" [(ngModel)]="statusFilter"
        (ngModelChange)="applyFilters()">
        <option value="">All</option>
        <option *ngFor="let status of orderStatuses" [value]="status">{{ status }}</option>
      </select>
    </div>


    <div class="row table-responsive mt-5 mb-4">
      <table class="table table-bordered table-striped col-md-12">
        <thead>
          <tr>
            <th scope="col">S.NO</th>
            <th scope="col">Order Id</th>
            <th scope="col">Payment Id</th>
            <th scope="col">Signature</th>
            <th scope="col">Customer Name</th>
            <th scope="col">Email</th>
            <th scope="col">Mobile Number</th>
            <th scope="col">Amount</th>
            <th scope="col">Profile</th>
            <th scope="col">Order Status</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>

          <tr
            *ngFor="let order of filteredOrders.slice((currentPage - 1) * pageSize, currentPage * pageSize); let i = index">
            <td>{{ i + 1 +(currentPage - 1) * pageSize}}</td>
            <td>{{order.razorpayOrderId}}</td>
            <td>{{order.razorpayPaymentId}}</td>
            <td>{{order.razorpaySignature}}</td>
            <td>{{order.username}}</td>
            <td>{{order.email}}</td>
            <td>{{order.mobileNumber}}</td>
            <td>{{order.amount}}</td>
            <td>{{order.profile}}</td>
            <td>
              <select id="status" [(ngModel)]="order.orderStatus" class="form-select" required>
                <option *ngFor="let status of orderStatuses" [value]="status">{{status}}</option>
              </select>
            </td>
            <td>
              <button class="btn btn-success" (click)="updateOrderStatus(order)">save</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-end">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" aria-label="Previous" (click)="onPageChange(currentPage - 1)">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li class="page-item" *ngFor="let page of getPageArray()">
        <a class="page-link" (click)="onPageChange(page)">{{ page }}</a>
      </li>
      <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
        <a class="page-link" aria-label="Next" (click)="onPageChange(currentPage + 1)">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
      <li class="page-item pt-2"> Total Records: {{ totalItems }}</li>
    </ul>
  </nav>
</div>